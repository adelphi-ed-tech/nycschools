<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>20. Exploring Segregation in NYC SChools &mdash; NYC Schools Open Data 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../_static/custom.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> NYC Schools Open Data
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01-Basics/index.html">Data Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-Combining-Data/index.html">1. Combining Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-Graphs-and-Charts/index.html">2. Graphs &amp; Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-Statistics/index.html">3. Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-Maps-and-GIS/index.html">4. Maps &amp; GIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data-sources.html">Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/nycschools.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NYC Schools Open Data</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">20. </span>Exploring Segregation in NYC SChools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/nb/_archive/segregation.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Exploring-Segregation-in-NYC-SChools">
<h1><span class="section-number">20. </span>Exploring Segregation in NYC SChools<a class="headerlink" href="#Exploring-Segregation-in-NYC-SChools" title="Permalink to this headline"></a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># load the demographic data</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">pingouin</span> <span class="k">as</span> <span class="nn">pg</span>

<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">r2_score</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">scale</span>
<span class="kn">from</span> <span class="nn">sklearn.cross_decomposition</span> <span class="kn">import</span> <span class="n">PLSRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_selection</span> <span class="kn">import</span> <span class="n">chi2</span>

<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>


<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span> <span class="k">as</span> <span class="n">md</span><span class="p">,</span> <span class="n">HTML</span>

<span class="n">help</span><span class="p">(</span><span class="s2">&quot;modules&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Please wait a moment while I gather a list of all available modules...

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/usr/lib/python3.10/pkgutil.py:92: UserWarning: The numpy.array_api submodule is still experimental. See NEP 47.
  __import__(info.name)
/home/mxc/.virtualenvs/school-data/lib/python3.10/site-packages/_distutils_hack/__init__.py:33: UserWarning: Setuptools is replacing distutils.
  warnings.warn(&#34;Setuptools is replacing distutils.&#34;)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
IPython             asynchat            jinja2              readline
Levenshtein         asyncio             joblib              reprlib
PIL                 asyncore            json                requests
__future__          atexit              json5               resource
_abc                attr                jsonschema          rlcompleter
_aix_support        attrs               jupyter             runpy
_argon2_cffi_bindings audioop             jupyter_client      sched
_ast                babel               jupyter_core        scipy
_asyncio            backcall            jupyter_server      seaborn
_bisect             base64              jupyterlab          secrets
_blake2             bdb                 jupyterlab_pygments select
_bootsubprocess     binascii            jupyterlab_server   selectors
_bz2                binhex              keyword             send2trash
_cffi_backend       bisect              kiwisolver          setuptools
_codecs             bleach              lazy_loader         shapely
_codecs_cn          branca              lib2to3             shelve
_codecs_hk          bs4                 linecache           shlex
_codecs_iso2022     builtins            littleutils         shutil
_codecs_jp          bz2                 locale              signal
_codecs_kr          cProfile            logging             site
_codecs_tw          calendar            lxml                sitecustomize
_collections        certifi             lzma                six
_collections_abc    cffi                mailbox             sklearn
_compat_pickle      cgi                 mailcap             smtpd
_compression        cgitb               mapclassify         smtplib
_contextvars        charset_normalizer  markupsafe          sndhdr
_crypt              chunk               marshal             sniffio
_csv                click               math                socket
_ctypes             click_plugins       matplotlib          socketserver
_ctypes_test        cligj               matplotlib_inline   soupsieve
_curses             cmath               mimetypes           spwd
_curses_panel       cmd                 mistune             sqlite3
_datetime           code                mmap                sre_compile
_dbm                codecs              modulefinder        sre_constants
_decimal            codeop              multiprocessing     sre_parse
_distutils_hack     collections         munch               ssl
_distutils_system_mod colorsys            nbclassic           stack_data
_elementtree        compileall          nbclient            stat
_functools          concurrent          nbconvert           statistics
_gdbm               configparser        nbformat            statsmodels
_hashlib            contextlib          nest_asyncio        string
_heapq              contextvars         netrc               stringprep
_imp                copy                networkx            struct
_io                 copyreg             nis                 subprocess
_json               crypt               nntplib             sunau
_locale             csv                 notebook            symtable
_lsprof             ctypes              notebook_shim       sys
_lzma               curses              ntpath              sysconfig
_markupbase         cycler              nturl2path          syslog
_md5                dataclasses         numbers             tabnanny
_multibytecodec     datetime            numpy               tabulate
_multiprocessing    dateutil            opcode              tarfile
_opcode             dbm                 openpyxl            telnetlib
_operator           debugpy             operator            tempfile
_osx_support        decimal             optparse            terminado
_pickle             decorator           os                  termios
_posixshmem         defusedxml          ossaudiodev         test
_posixsubprocess    difflib             outdated            textwrap
_py_abc             dis                 packaging           thefuzz
_pydecimal          distutils           pandas              this
_pyio               doctest             pandas_flavor       threading
_pyrsistent_version email               pandocfilters       threadpoolctl
_queue              encodings           parso               time
_random             entrypoints         pathlib             timeit
_sha1               enum                patsy               tinycss2
_sha256             errno               pdb                 token
_sha3               et_xmlfile          pexpect             tokenize
_sha512             executing           pickle              tornado
_signal             fastjsonschema      pickleshare         trace
_sitebuiltins       faulthandler        pickletools         traceback
_socket             fcntl               pingouin            tracemalloc
_sqlite3            filecmp             pip                 traitlets
_sre                fileinput           pipes               tty
_ssl                fiona               pkg_resources       turtle
_stat               fnmatch             pkgutil             types
_statistics         folium              platform            typing
_string             fontTools           plistlib            unicodedata
_strptime           fractions           poplib              unittest
_struct             ftplib              posix               urllib
_symtable           functools           posixpath           urllib3
_sysconfigdata__linux_x86_64-linux-gnu gc                  pprint              uu
_sysconfigdata__x86_64-linux-gnu genericpath         profile             uuid
_testbuffer         geopandas           prometheus_client   venv
_testcapi           getopt              prompt_toolkit      warnings
_testimportmultiple getpass             pstats              wave
_testinternalcapi   gettext             psutil              wcwidth
_testmultiphase     glob                pty                 weakref
_thread             graphlib            ptyprocess          webbrowser
_threading_local    grp                 pure_eval           webencodings
_tracemalloc        gzip                pvectorc            websocket
_uuid               hashlib             pwd                 wheel
_virtualenv         heapq               py_compile          wsgiref
_warnings           hmac                pyarrow             xarray
_weakref            html                pyclbr              xdrlib
_weakrefset         http                pycparser           xml
_xxsubinterpreters  idna                pydoc               xmlrpc
_xxtestfuzz         imaplib             pydoc_data          xxlimited
_zoneinfo           imghdr              pyexpat             xxlimited_35
abc                 imp                 pygments            xxsubtype
aifc                importlib           pylab               zipapp
anova               inspect             pyparsing           zipfile
antigravity         io                  pyproj              zipimport
anyio               ipaddress           pyrsistent          zlib
argon2              ipykernel           pytz                zmq
argparse            ipykernel_launcher  queue               zoneinfo
array               ipython_genutils    quopri
ast                 itertools           random
asttokens           jedi                re

Enter any module name to get more help.  Or, type &#34;modules spam&#34; to search
for modules whose name or summary contain the string &#34;spam&#34;.

</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/usr/lib/python3.10/pkgutil.py:107: VisibleDeprecationWarning: zmq.eventloop.minitornado is deprecated in pyzmq 14.0 and will be removed.
    Install tornado itself to use zmq with the tornado IOLoop.

  yield from walk_packages(path, info.name+&#39;.&#39;, onerror)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">school_data</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
Input <span class="ansi-green-fg">In [1]</span>, in <span class="ansi-cyan-fg">&lt;cell line: 1&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> <span class="ansi-bold" style="color: rgb(0,0,255)">school_data</span>

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named &#39;school_data&#39;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load the demographic data and merge it with the test and location data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">schools</span><span class="o">.</span><span class="n">load_school_demographics</span><span class="p">()</span>
<span class="n">nys_exams</span> <span class="o">=</span> <span class="n">exams</span><span class="o">.</span><span class="n">load_math_ela_long</span><span class="p">()</span>
<span class="n">school_loc</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">load_school_locations</span><span class="p">()</span>
<span class="n">districts</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">load_districts</span><span class="p">()</span>

<span class="c1"># merge and filter the data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">nys_exams</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;ay&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;ay==2018 and grade == &#39;All Grades&#39;&quot;</span><span class="p">)</span>

<span class="c1"># calculate NYSED score percentiles</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_hispanic_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_pct&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hispanic_pct&quot;</span><span class="p">]</span>

<span class="c1"># split the data set into 5 groups, 0..4, with 0 being most white/asian and 4 being most black/hispanic</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;seg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;black_hispanic_pct&#39;</span><span class="p">],</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s2">&quot;seg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;mean_scale_score&#39;</span><span class="p">],</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># group the data by segregation percentile</span>
<span class="n">aggregates</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;dbn&quot;</span><span class="p">:</span><span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;poverty_pct&quot;</span><span class="p">:</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;black_pct&quot;</span><span class="p">:</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hispanic_pct&quot;</span><span class="p">:</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;white_pct&quot;</span><span class="p">:</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;asian_pct&quot;</span><span class="p">:</span><span class="s2">&quot;mean&quot;</span>
<span class="p">}</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;seg&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">aggregates</span><span class="p">)</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># format and display the table</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s2">&quot;Most Black / Hispanic&quot;</span><span class="p">,</span>
          <span class="mi">1</span><span class="p">:</span><span class="s2">&quot;More Black / Hispanic&quot;</span><span class="p">,</span>
          <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;Mixed Race / Ethnicity&quot;</span><span class="p">,</span>
          <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;More White / Asian&quot;</span><span class="p">,</span>
          <span class="mi">4</span><span class="p">:</span><span class="s2">&quot;Most White / Asian&quot;</span><span class="p">,</span>
          <span class="s2">&quot;New York City&quot;</span><span class="p">:</span><span class="s2">&quot;New York City&quot;</span><span class="p">}</span>

<span class="n">table</span><span class="o">.</span><span class="n">seg</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">seg</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

<span class="n">city</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">aggregates</span><span class="p">)</span>
<span class="n">city</span><span class="p">[</span><span class="s2">&quot;seg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;New York City&quot;</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">city</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">fmt_table</span><span class="p">(</span><span class="n">table</span><span class="p">,</span>
             <span class="n">num_cols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">],</span>
             <span class="n">pct_cols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;poverty_pct&quot;</span><span class="p">,</span> <span class="s2">&quot;black_pct&quot;</span><span class="p">,</span> <span class="s2">&quot;hispanic_pct&quot;</span><span class="p">,</span> <span class="s2">&quot;white_pct&quot;</span><span class="p">,</span><span class="s2">&quot;asian_pct&quot;</span><span class="p">])</span>

<span class="n">table</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;# Schools&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;% Poverty&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;% Black&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;% Hispanic&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;% White&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;% Asian&quot;</span><span class="p">]</span>
<span class="n">table</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/tmp/ipykernel_9538/1136991995.py:25: FutureWarning: The frame.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.
  table = table.append(city.transpose(), ignore_index=True)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th># Schools</th>
      <th>% Poverty</th>
      <th>% Black</th>
      <th>% Hispanic</th>
      <th>% White</th>
      <th>% Asian</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Most Black / Hispanic</td>
      <td>5,936.0</td>
      <td>86.8%</td>
      <td>34.8%</td>
      <td>50.0%</td>
      <td>6.0%</td>
      <td>7.3%</td>
    </tr>
    <tr>
      <th>1</th>
      <td>More Black / Hispanic</td>
      <td>5,936.0</td>
      <td>84.8%</td>
      <td>33.5%</td>
      <td>49.7%</td>
      <td>7.1%</td>
      <td>7.7%</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Mixed Race / Ethnicity</td>
      <td>5,934.0</td>
      <td>80.2%</td>
      <td>29.8%</td>
      <td>45.2%</td>
      <td>10.5%</td>
      <td>12.1%</td>
    </tr>
    <tr>
      <th>3</th>
      <td>More White / Asian</td>
      <td>5,936.0</td>
      <td>70.8%</td>
      <td>20.8%</td>
      <td>38.0%</td>
      <td>19.8%</td>
      <td>18.5%</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Most White / Asian</td>
      <td>5,934.0</td>
      <td>53.1%</td>
      <td>10.7%</td>
      <td>25.7%</td>
      <td>32.0%</td>
      <td>27.6%</td>
    </tr>
    <tr>
      <th>5</th>
      <td>New York City</td>
      <td>33,596.0</td>
      <td>75.5%</td>
      <td>27.1%</td>
      <td>41.7%</td>
      <td>14.7%</td>
      <td>13.9%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;poverty_pct&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;seg&quot;</span><span class="p">])</span>
<span class="n">degs_f</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span>

<span class="n">report_r</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">**A Pearson&#39;s correlation coefficient** was computed to assess the linear relationship</span>
<span class="s2">between _% poverty_ and _segregation quintile_.</span>

<span class="s2">There was a positive correlation between the two variables, r(</span><span class="si">{</span><span class="n">degs_f</span><span class="si">}</span><span class="s2">) = </span><span class="si">{</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, p = </span><span class="si">{</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;p-val&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">md</span><span class="p">(</span><span class="n">report_r</span><span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<p><strong>A Pearson’s correlation coefficient</strong> was computed to assess the linear relationship between <em>% poverty</em> and <em>segregation quintile</em>.</p>
<p>There was a positive correlation between the two variables, r(9999) = 0.62, p = 0.000.</p>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Most Black / Hispanic&quot;</span><span class="p">,</span>
          <span class="s2">&quot;More Black / Hispanic&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mixed Race / Ethnicity&quot;</span><span class="p">,</span>
          <span class="s2">&quot;More White / Asian&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Most White / Asian&quot;</span><span class="p">]</span>
<span class="n">labels</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># mrege locations with our data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">school_loc</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="c1"># get the matplotib figure and axis</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

<span class="c1"># set the &quot;look&quot; for our graph</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="s1">&#39;talk&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;coolwarm&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>

<span class="c1"># plot one group at a time so we get a legend</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">school_loc</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">seg</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Segregation Quintiles&#39;</span><span class="p">)</span>

<span class="n">districts</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="c1"># this function adds labels after the plot is drawn</span>
<span class="c1"># ax is the axis to plot on, districs is the full data set, and district is the column to use for the label</span>
<span class="n">geo</span><span class="o">.</span><span class="n">add_labels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">districts</span><span class="p">,</span> <span class="s2">&quot;district&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/mxc/.virtualenvs/data-con/lib/python3.9/site-packages/geopandas/geodataframe.py:1327: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  result = super().__getitem__(key)
/home/mxc/.virtualenvs/data-con/lib/python3.9/site-packages/geopandas/geodataframe.py:1327: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  result = super().__getitem__(key)
/home/mxc/.virtualenvs/data-con/lib/python3.9/site-packages/geopandas/geodataframe.py:1327: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  result = super().__getitem__(key)
/home/mxc/.virtualenvs/data-con/lib/python3.9/site-packages/geopandas/geodataframe.py:1327: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  result = super().__getitem__(key)
/home/mxc/.virtualenvs/data-con/lib/python3.9/site-packages/geopandas/geodataframe.py:1327: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  result = super().__getitem__(key)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/nb__archive_segregation_7_1.png" src="../../_images/nb__archive_segregation_7_1.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load the data we need</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">schools</span><span class="o">.</span><span class="n">load_school_demographics</span><span class="p">()</span>
<span class="n">nys_exams</span> <span class="o">=</span> <span class="n">exams</span><span class="o">.</span><span class="n">load_math_ela_long</span><span class="p">()</span>
<span class="n">nys_exams</span> <span class="o">=</span> <span class="n">nys_exams</span><span class="p">[</span><span class="n">nys_exams</span><span class="p">[</span><span class="s2">&quot;mean_scale_score&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
<span class="n">school_loc</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">load_school_locations</span><span class="p">()</span>
<span class="n">districts</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">load_districts</span><span class="p">()</span>



<span class="c1"># merge and filter the data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">nys_exams</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;ay&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;ay==2018 and grade == &#39;All Grades&#39;&quot;</span><span class="p">)</span>
<span class="c1"># calculate NYSED score percentiles</span>
<span class="n">data</span><span class="p">[</span><span class="s2">&quot;score_percentile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;mean_scale_score&#39;</span><span class="p">],</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_hispanic_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_pct&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hispanic_pct&quot;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_hispanic_n&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_n&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hispanic_n&quot;</span><span class="p">]</span>

<span class="c1"># split the data set into 5 groups, 0..4, with 0 being most white/asian and 4 being most black/hispanic</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;seg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;black_hispanic_pct&#39;</span><span class="p">],</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s2">&quot;seg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;mean_scale_score&#39;</span><span class="p">],</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">school_loc</span> <span class="o">=</span> <span class="n">school_loc</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the matplotib figure and axis</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

<span class="c1"># use these for the legend instead of 0,1,2,3,4</span>
<span class="n">legend_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Highest test scores&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;Higher test scores&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;Average test scores&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;Lower test scores&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;Lowest test scores&quot;</span><span class="p">]</span>

<span class="c1"># set the &quot;look&quot; for our graph</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="s1">&#39;talk&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;coolwarm&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend_labels</span><span class="p">))</span>

<span class="c1"># plot one group at a time so we get a legend</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">school_loc</span><span class="p">[</span><span class="n">school_loc</span><span class="o">.</span><span class="n">score_percentile</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>


<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">legend_labels</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;NYSED Test Score Quintiles&#39;</span><span class="p">)</span>
<span class="n">districts</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">geo</span><span class="o">.</span><span class="n">add_labels</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">districts</span><span class="p">,</span> <span class="s2">&quot;district&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/nb__archive_segregation_9_0.png" src="../../_images/nb__archive_segregation_9_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">school_loc</span><span class="p">[</span><span class="n">school_loc</span><span class="o">.</span><span class="n">score_percentile</span> <span class="o">==</span> <span class="mi">0</span><span class="p">][[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;mean_scale_score&quot;</span><span class="p">,</span> <span class="s2">&quot;score_percentile&quot;</span><span class="p">]])</span>
<span class="n">data</span><span class="o">.</span><span class="n">grade</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([&#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;All Grades&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;], dtype=object)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([2016, 2017, 2018])
</pre></div></div>
</div>
<section id="OLS-Linear-Regression">
<h2><span class="section-number">20.1. </span>OLS Linear Regression<a class="headerlink" href="#OLS-Linear-Regression" title="Permalink to this headline"></a></h2>
<p>We’re going to run a linear regression prediction with several different sets of factors to see which combination creates the strongest predictive model.</p>
<p>Because the training and testing sets are randomized we will get slightly different results each time we run the code in this cell. It appears that the factors that total enrollment has no predictive power and that including poverty_pct without eni_pct produces slightly better predictions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get only the data that has test scores</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;mean_scale_score&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
<span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;asian_pct&#39;</span><span class="p">,</span><span class="s1">&#39;black_pct&#39;</span><span class="p">,</span>
       <span class="s1">&#39;hispanic_pct&#39;</span><span class="p">,</span>  <span class="s1">&#39;white_pct&#39;</span><span class="p">,</span><span class="s1">&#39;swd_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;ell_pct&#39;</span><span class="p">,</span>  <span class="s1">&#39;poverty_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;charter&#39;</span><span class="p">,</span> <span class="s1">&#39;seg&#39;</span><span class="p">]</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>

<span class="c1"># shuffle our data frame so test, train are randomized, but the same across runs</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># make a small function so that we can report r2 and mse for different factors</span>

<span class="k">def</span> <span class="nf">show_predict</span><span class="p">(</span><span class="n">factors</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">factors</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mean_scale_score&#39;</span><span class="p">]</span>
    <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">train_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

    <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="n">predictions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>
    <span class="n">rmse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">report</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">**</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">**</span>

<span class="s2">- factors: </span><span class="si">{</span><span class="n">factors</span><span class="si">}</span>
<span class="s2">- r2: </span><span class="si">{</span><span class="n">r2</span><span class="si">}</span>
<span class="s2">- rmse: </span><span class="si">{</span><span class="n">rmse</span><span class="si">}</span>
<span class="s2">&quot;&quot;&quot;</span>
    <span class="n">display</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="n">report</span><span class="p">))</span>

<span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;asian_pct&#39;</span><span class="p">,</span><span class="s1">&#39;black_pct&#39;</span><span class="p">,</span>
       <span class="s1">&#39;hispanic_pct&#39;</span><span class="p">,</span>  <span class="s1">&#39;white_pct&#39;</span><span class="p">,</span><span class="s1">&#39;swd_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;ell_pct&#39;</span><span class="p">,</span>  <span class="s1">&#39;poverty_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;charter&#39;</span><span class="p">]</span>
<span class="n">show_predict</span><span class="p">(</span><span class="n">factors</span><span class="p">,</span> <span class="s2">&quot;OLS Predictions: No Segregation&quot;</span> <span class="p">)</span>
<span class="n">factors</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;seg&quot;</span><span class="p">]</span>
<span class="n">show_predict</span><span class="p">(</span><span class="n">factors</span><span class="p">,</span> <span class="s2">&quot;OLS Predictions: With Segregation&quot;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p><strong>OLS Predictions: No Segregation</strong></p>
<ul class="simple">
<li><p>factors: [‘asian_pct’, ‘black_pct’, ‘hispanic_pct’, ‘white_pct’, ‘swd_pct’, ‘ell_pct’, ‘poverty_pct’, ‘charter’]</p></li>
<li><p>r2: 0.4320444669328384</p></li>
<li><p>rmse: 8.778721275258132</p></li>
</ul>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<p><strong>OLS Predictions: With Segregation</strong></p>
<ul class="simple">
<li><p>factors: [‘asian_pct’, ‘black_pct’, ‘hispanic_pct’, ‘white_pct’, ‘swd_pct’, ‘ell_pct’, ‘poverty_pct’, ‘charter’, ‘seg’]</p></li>
<li><p>r2: 0.893577682548752</p></li>
<li><p>rmse: 3.8000599567692315</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="Partial-Least-Squares">
<h1><span class="section-number">21. </span>Partial Least Squares<a class="headerlink" href="#Partial-Least-Squares" title="Permalink to this headline"></a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">factors</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;mean_scale_score&#39;</span><span class="p">]</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">train_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">pls</span> <span class="o">=</span> <span class="n">PLSRegression</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">factors</span><span class="p">))</span>
<span class="n">pls</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>


<span class="n">predictions</span> <span class="o">=</span> <span class="n">pls</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">r2_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>
<span class="n">rmse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">,</span> <span class="n">squared</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">md</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">**PLS Predictions**</span>

<span class="s2">- factors: </span><span class="si">{</span><span class="n">factors</span><span class="si">}</span>
<span class="s2">- r2: </span><span class="si">{</span><span class="n">r2</span><span class="si">}</span>
<span class="s2">- rmse: </span><span class="si">{</span><span class="n">rmse</span><span class="si">}</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<p><strong>PLS Predictions</strong></p>
<ul class="simple">
<li><p>factors: [‘asian_pct’, ‘black_pct’, ‘hispanic_pct’, ‘white_pct’, ‘swd_pct’, ‘ell_pct’, ‘poverty_pct’, ‘charter’, ‘seg’]</p></li>
<li><p>r2: 0.8951023699977599</p></li>
<li><p>rmse: 3.7570278812026263</p></li>
</ul>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># fit both models with the full data and show the correlations</span>
<span class="n">ols_fit</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">pls_fit</span> <span class="o">=</span> <span class="n">pls</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">coef_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;factor&quot;</span><span class="p">,</span> <span class="s2">&quot;pls-coef&quot;</span><span class="p">,</span> <span class="s2">&quot;ols-coef&quot;</span><span class="p">])</span>

<span class="n">coef_table</span><span class="o">.</span><span class="n">factor</span> <span class="o">=</span> <span class="n">factors</span>

<span class="n">coef_table</span><span class="p">[</span><span class="s2">&quot;pls-coef&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pls</span><span class="o">.</span><span class="n">coef_</span><span class="p">]</span>
<span class="n">coef_table</span><span class="p">[</span><span class="s2">&quot;ols-coef&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">coef_</span><span class="p">]</span>

<span class="c1"># coef_table.join(ols_df, on=&quot;factor&quot;)</span>
<span class="n">coef_table</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>factor</th>
      <th>pls-coef</th>
      <th>ols-coef</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>asian_pct</td>
      <td>-0.502301</td>
      <td>-2.521485</td>
    </tr>
    <tr>
      <th>1</th>
      <td>black_pct</td>
      <td>-1.167738</td>
      <td>-4.376453</td>
    </tr>
    <tr>
      <th>2</th>
      <td>hispanic_pct</td>
      <td>-0.797357</td>
      <td>-3.120187</td>
    </tr>
    <tr>
      <th>3</th>
      <td>white_pct</td>
      <td>-1.012294</td>
      <td>-5.211891</td>
    </tr>
    <tr>
      <th>4</th>
      <td>swd_pct</td>
      <td>-0.188886</td>
      <td>-2.855248</td>
    </tr>
    <tr>
      <th>5</th>
      <td>ell_pct</td>
      <td>-0.583584</td>
      <td>-4.366907</td>
    </tr>
    <tr>
      <th>6</th>
      <td>poverty_pct</td>
      <td>-1.021308</td>
      <td>-4.679482</td>
    </tr>
    <tr>
      <th>7</th>
      <td>charter</td>
      <td>0.093267</td>
      <td>0.805050</td>
    </tr>
    <tr>
      <th>8</th>
      <td>seg</td>
      <td>10.231126</td>
      <td>7.260639</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">&quot;### Graph of PLS coefficients&quot;</span><span class="p">))</span>
<span class="n">coefs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pls</span><span class="o">.</span><span class="n">coef_</span><span class="p">]</span>
<span class="n">ui</span><span class="o">.</span><span class="n">network_map</span><span class="p">(</span><span class="s2">&quot;mean_scale_score&quot;</span><span class="p">,</span> <span class="n">factors</span><span class="p">,</span> <span class="n">coefs</span> <span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">md</span><span class="p">(</span><span class="s2">&quot;### Graph of OLS coefficients&quot;</span><span class="p">))</span>
<span class="n">coefs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">coef_</span><span class="p">]</span>
<span class="n">ui</span><span class="o">.</span><span class="n">network_map</span><span class="p">(</span><span class="s2">&quot;mean_scale_score&quot;</span><span class="p">,</span> <span class="n">factors</span><span class="p">,</span> <span class="n">coefs</span> <span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<section id="Graph-of-PLS-coefficients">
<h2><span class="section-number">20. </span>Graph of PLS coefficients<a class="headerlink" href="#Graph-of-PLS-coefficients" title="Permalink to this headline"></a></h2>
</section>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/nb__archive_segregation_17_1.png" src="../../_images/nb__archive_segregation_17_1.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<section id="Graph-of-OLS-coefficients">
<h2><span class="section-number">20. </span>Graph of OLS coefficients<a class="headerlink" href="#Graph-of-OLS-coefficients" title="Permalink to this headline"></a></h2>
</section>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/nb__archive_segregation_17_3.png" src="../../_images/nb__archive_segregation_17_3.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Matthew X. Curinga.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>