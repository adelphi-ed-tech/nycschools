<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4. Cleaning and Querying Pandas Data &mdash; NYC Schools Open Data 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> NYC Schools Open Data
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01-Basics/index.html">Data Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-Combining-Data/index.html">Combining Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-Graphs-and-Charts/index.html">Graphs &amp; Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-Statistics/index.html">Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-Maps-and-GIS/index.html">Maps &amp; GIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data-sources.html">Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/nycschools.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NYC Schools Open Data</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">4. </span>Cleaning and Querying Pandas Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/nb/_archive/clean-query.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Cleaning-and-Querying-Pandas-Data">
<h1><span class="section-number">4. </span>Cleaning and Querying Pandas Data<a class="headerlink" href="#Cleaning-and-Querying-Pandas-Data" title="Permalink to this heading"></a></h1>
<p>This notebook shows us how to <strong>modify</strong> and <strong>create new</strong> columns in a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. This is an important part of cleaning data to prepare it for analysis and visualization.</p>
<p>We also look at some techniques for <em>searching data</em> in order to get subsets of data (rows) that match certain criteria.</p>
<p>Finally, we learn how to save and load local copies of the data so that we can easily use the cleaned data.</p>
<p>Some relevant ressources: - <a class="reference external" href="https://www.statology.org/create-column-based-on-condition-pandas/">https://www.statology.org/create-column-based-on-condition-pandas/</a> - <a class="reference external" href="https://datascientyst.com/select-rows-column-value-pandas/">https://datascientyst.com/select-rows-column-value-pandas/</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import pandas and load the school demographic data set into df</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://data.cityofnewyork.us/resource/vmmu-wj3w.csv?$limit=1000000&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Selecting-rows-with-boolean-indexing">
<h1><span class="section-number">5. </span>Selecting rows with boolean indexing<a class="headerlink" href="#Selecting-rows-with-boolean-indexing" title="Permalink to this heading"></a></h1>
<p>Pandas has several ways to select data – to get a subset of data from a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. One of the easiest ways is to use “boolan indexing”. This approach lets us use the Python comparison operators to find rows that match our criteria. We can then use the “index” of these rows to get a subset from a dataframe.</p>
<p>In this example we use the “dbn” field look for a match with a specific string. We capture the results in a variable, <code class="docutils literal notranslate"><span class="pre">ps9</span></code> that holds the new <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s find PS 9 in Brooklyn, District 13</span>
<span class="n">ps9</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;13K009&quot;</span><span class="p">]</span>
<span class="n">ps9</span><span class="p">[</span> <span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;school_name&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;total_enrollment&quot;</span><span class="p">,</span> <span class="s2">&quot;grade_3k_pk_half_day_full&quot;</span><span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dbn</th>
      <th>school_name</th>
      <th>year</th>
      <th>total_enrollment</th>
      <th>grade_3k_pk_half_day_full</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3247</th>
      <td>13K009</td>
      <td>Public School 9 The Sarah Smith Garnet School</td>
      <td>2016-17</td>
      <td>866</td>
      <td>90</td>
    </tr>
    <tr>
      <th>3248</th>
      <td>13K009</td>
      <td>Public School 9 The Sarah Smith Garnet School</td>
      <td>2017-18</td>
      <td>912</td>
      <td>132</td>
    </tr>
    <tr>
      <th>3249</th>
      <td>13K009</td>
      <td>Public School 9 The Sarah Smith Garnet School</td>
      <td>2018-19</td>
      <td>942</td>
      <td>130</td>
    </tr>
    <tr>
      <th>3250</th>
      <td>13K009</td>
      <td>Public School 9 The Sarah Smith Garnet School</td>
      <td>2019-20</td>
      <td>937</td>
      <td>126</td>
    </tr>
    <tr>
      <th>3251</th>
      <td>13K009</td>
      <td>Public School 9 The Sarah Smith Garnet School</td>
      <td>2020-21</td>
      <td>852</td>
      <td>111</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Sometimes, we want to filter our main dataframe. To make the rest of our examples easier, let’s filter our dataframe so that we only have the data from the most recent academic year.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;2020-21&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>We can use boolean indexing with more complex examples, too where we combine boolean expressions. For this, we use the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> <strong>and</strong> operator and the <code class="docutils literal notranslate"><span class="pre">|</span></code> <strong>or</strong> operator.</p>
<p>Here we find schools that where more than half the students are Asian and more than half the students are classified as ELL.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">asian_enl</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;asian_1&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">.5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;english_language_learners_1&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">.5</span><span class="p">)</span> <span class="p">]</span>
<span class="c1"># df[ df[&quot;english_language_learners_1&quot;] &gt; .5 ]</span>
<span class="n">asian_enl</span><span class="p">[[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;school_name&quot;</span><span class="p">,</span> <span class="s2">&quot;asian_1&quot;</span><span class="p">,</span> <span class="s2">&quot;english_language_learners_1&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dbn</th>
      <th>school_name</th>
      <th>asian_1</th>
      <th>english_language_learners_1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3686</th>
      <td>15K094</td>
      <td>P.S. 094 The Henry Longfellow</td>
      <td>0.703</td>
      <td>0.554</td>
    </tr>
    <tr>
      <th>4660</th>
      <td>20K069</td>
      <td>P.S. 69 Vincent D. Grippo School</td>
      <td>0.891</td>
      <td>0.501</td>
    </tr>
    <tr>
      <th>4675</th>
      <td>20K105</td>
      <td>P.S. 105 The Blythebourne</td>
      <td>0.926</td>
      <td>0.515</td>
    </tr>
    <tr>
      <th>4690</th>
      <td>20K160</td>
      <td>P.S. 160 William T. Sampson</td>
      <td>0.885</td>
      <td>0.632</td>
    </tr>
    <tr>
      <th>5850</th>
      <td>25Q244</td>
      <td>The Active Learning Elementary School</td>
      <td>0.889</td>
      <td>0.546</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Here we use the <code class="docutils literal notranslate"><span class="pre">|</span></code> to find schools that are either &gt;70% Black or &gt;70 Latinx.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">black_or_latinx</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_1&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">.7</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;hispanic_1&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">.7</span><span class="p">)</span> <span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">black_or_latinx</span><span class="p">)</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2"> schools in our data set have more than 70% Black or Latinx student populations.&quot;&quot;&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
564 of 1878 schools in our data set have more than 70% Black or Latinx student populations.
</pre></div></div>
</div>
</section>
<section id="Creating-new-columns">
<h1><span class="section-number">6. </span>Creating new columns<a class="headerlink" href="#Creating-new-columns" title="Permalink to this heading"></a></h1>
<section id="Create-a-new-column-based-on-data-from-other-columns">
<h2><span class="section-number">6.1. </span>Create a new column based on data from other columns<a class="headerlink" href="#Create-a-new-column-based-on-data-from-other-columns" title="Permalink to this heading"></a></h2>
<p>One of the most straightforward ways to modify a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is to create a new column based on data in an existing column. Let’s do that with our data.</p>
<p>In New York City some elementary schools offer “universal pre-k” – school for 3 year olds and 4 year olds. We can infer whether a school has pre-k based on the number of students enrolled in prek-3 or prek-4, indicated by ‘grade_3k_pk_half_day_full’.</p>
<p>Let’s start simple and add a new column called <code class="docutils literal notranslate"><span class="pre">prek</span></code> which will hold a <code class="docutils literal notranslate"><span class="pre">Boolean</span></code> value. <code class="docutils literal notranslate"><span class="pre">True</span></code> if the school has more than zero students in pre-k and <code class="docutils literal notranslate"><span class="pre">False</span></code> if it doesn’t.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;prek&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;grade_3k_pk_half_day_full&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>

<span class="c1"># let&#39;s see some cols in our df to see if it worked</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;school_name&quot;</span><span class="p">,</span> <span class="s2">&quot;prek&quot;</span><span class="p">]]</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dbn</th>
      <th>school_name</th>
      <th>prek</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4</th>
      <td>01M015</td>
      <td>P.S. 015 Roberto Clemente</td>
      <td>True</td>
    </tr>
    <tr>
      <th>9</th>
      <td>01M019</td>
      <td>P.S. 019 Asher Levy</td>
      <td>True</td>
    </tr>
    <tr>
      <th>14</th>
      <td>01M020</td>
      <td>P.S. 020 Anna Silver</td>
      <td>True</td>
    </tr>
    <tr>
      <th>19</th>
      <td>01M034</td>
      <td>P.S. 034 Franklin D. Roosevelt</td>
      <td>True</td>
    </tr>
    <tr>
      <th>24</th>
      <td>01M063</td>
      <td>The STAR Academy - P.S.63</td>
      <td>True</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>9148</th>
      <td>84X705</td>
      <td>Family Life Academy Charter School</td>
      <td>False</td>
    </tr>
    <tr>
      <th>9153</th>
      <td>84X706</td>
      <td>Harriet Tubman Charter School</td>
      <td>False</td>
    </tr>
    <tr>
      <th>9158</th>
      <td>84X717</td>
      <td>Icahn Charter School</td>
      <td>False</td>
    </tr>
    <tr>
      <th>9163</th>
      <td>84X718</td>
      <td>Bronx Charter School for Better Learning</td>
      <td>True</td>
    </tr>
    <tr>
      <th>9168</th>
      <td>84X730</td>
      <td>Bronx Charter School for the Arts</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>1878 rows × 3 columns</p>
</div></div>
</div>
<p>In the code cell above, on the left hand side of the expression we create the new column with <code class="docutils literal notranslate"><span class="pre">df[&quot;prek&quot;]</span></code> on the right hand side we have a Boolean expression on the using the field “grade_3k_pk_half_day_full” and the <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">0</span></code> comparison operator. Once that expression resolves, it’s assigned to the new “prek” field.</p>
<p>Now let’s do a basic query to find how many schools have prek and how many don’t.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">schools_with_prek</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;prek&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
<span class="n">schools_without_prek</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;prek&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">schools_with_prek</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="si">}</span><span class="s2"> offer pre-k&quot;&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">schools_without_prek</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="si">}</span><span class="s2"> don&#39;t offer pre-k&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
717 offer pre-k
1161 don&#39;t offer pre-k
</pre></div></div>
</div>
<p>We can use this approach to make more complex columns, too. Let’s add 2 new columns, <code class="docutils literal notranslate"><span class="pre">black_hispanic</span></code> with the combined enrollment of Black and Latinx students, and <code class="docutils literal notranslate"><span class="pre">black_hispanic_1</span></code> with the percent of Black and Latinx.</p>
<p>First we use the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator to add the values of two columns, then the <code class="docutils literal notranslate"><span class="pre">\</span></code> operator to divide two columns.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_hispanic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hispanic&quot;</span><span class="p">]</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_hispanic_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;black_hispanic&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;total_enrollment&quot;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;school_name&quot;</span><span class="p">,</span> <span class="s2">&quot;total_enrollment&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;hispanic&quot;</span><span class="p">,</span> <span class="s2">&quot;black_hispanic&quot;</span><span class="p">,</span> <span class="s2">&quot;black_hispanic_1&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dbn</th>
      <th>school_name</th>
      <th>total_enrollment</th>
      <th>black</th>
      <th>hispanic</th>
      <th>black_hispanic</th>
      <th>black_hispanic_1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4</th>
      <td>01M015</td>
      <td>P.S. 015 Roberto Clemente</td>
      <td>193</td>
      <td>53</td>
      <td>102</td>
      <td>155</td>
      <td>0.803109</td>
    </tr>
    <tr>
      <th>9</th>
      <td>01M019</td>
      <td>P.S. 019 Asher Levy</td>
      <td>212</td>
      <td>41</td>
      <td>130</td>
      <td>171</td>
      <td>0.806604</td>
    </tr>
    <tr>
      <th>14</th>
      <td>01M020</td>
      <td>P.S. 020 Anna Silver</td>
      <td>412</td>
      <td>55</td>
      <td>215</td>
      <td>270</td>
      <td>0.655340</td>
    </tr>
    <tr>
      <th>19</th>
      <td>01M034</td>
      <td>P.S. 034 Franklin D. Roosevelt</td>
      <td>273</td>
      <td>104</td>
      <td>152</td>
      <td>256</td>
      <td>0.937729</td>
    </tr>
    <tr>
      <th>24</th>
      <td>01M063</td>
      <td>The STAR Academy - P.S.63</td>
      <td>208</td>
      <td>40</td>
      <td>132</td>
      <td>172</td>
      <td>0.826923</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>9148</th>
      <td>84X705</td>
      <td>Family Life Academy Charter School</td>
      <td>416</td>
      <td>88</td>
      <td>323</td>
      <td>411</td>
      <td>0.987981</td>
    </tr>
    <tr>
      <th>9153</th>
      <td>84X706</td>
      <td>Harriet Tubman Charter School</td>
      <td>647</td>
      <td>399</td>
      <td>232</td>
      <td>631</td>
      <td>0.975270</td>
    </tr>
    <tr>
      <th>9158</th>
      <td>84X717</td>
      <td>Icahn Charter School</td>
      <td>328</td>
      <td>164</td>
      <td>157</td>
      <td>321</td>
      <td>0.978659</td>
    </tr>
    <tr>
      <th>9163</th>
      <td>84X718</td>
      <td>Bronx Charter School for Better Learning</td>
      <td>570</td>
      <td>482</td>
      <td>57</td>
      <td>539</td>
      <td>0.945614</td>
    </tr>
    <tr>
      <th>9168</th>
      <td>84X730</td>
      <td>Bronx Charter School for the Arts</td>
      <td>626</td>
      <td>168</td>
      <td>441</td>
      <td>609</td>
      <td>0.972843</td>
    </tr>
  </tbody>
</table>
<p>1878 rows × 7 columns</p>
</div></div>
</div>
</section>
<section id="Create-a-new-column-with-a-function-using-apply()">
<h2><span class="section-number">6.2. </span>Create a new column with a function using <code class="docutils literal notranslate"><span class="pre">apply()</span></code><a class="headerlink" href="#Create-a-new-column-with-a-function-using-apply()" title="Permalink to this heading"></a></h2>
<p>Sometimes the column we want can’t be easily calculated using arithmetic. Pandas lets use use a function to calculate values with more complex logic. You can create a new <code class="docutils literal notranslate"><span class="pre">Series</span></code> by using the <code class="docutils literal notranslate"><span class="pre">apply()</span></code> function on a column from your dataframe.</p>
<p>In this example we parse the dbn to create a new field called <code class="docutils literal notranslate"><span class="pre">district</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">parse_district</span><span class="p">(</span><span class="n">dbn</span><span class="p">):</span>
    <span class="c1"># use Python string &quot;slice&quot; notation to get the district part of the DBN</span>
    <span class="c1"># we know it&#39;s always the first two characters</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span> <span class="n">dbn</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>  <span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;district&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">parse_district</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;district&quot;</span><span class="p">,</span> <span class="s2">&quot;school_name&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;01M034&quot;</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;4&#39;
</pre></div></div>
</div>
<p><strong>Using lambda</strong></p>
<p>You can always define a function and use <code class="docutils literal notranslate"><span class="pre">apply()</span></code> the way I do in the example. Often, though, professional programmers will use lambda functions as a shortcut to do this. You can read about lambdas here: <a class="reference external" href="https://www.freecodecamp.org/news/lambda-expressions-in-python/">https://www.freecodecamp.org/news/lambda-expressions-in-python/</a></p>
<p>Basically, a lambada is an anonymous function (it has no name and only exists briefly) which takes arguments and returns a value from a single expression. You are not required to use lambdas, but there’s a good chance that you will see them being used in examples online.</p>
<p>We would re-write our above example more concisely using lambda.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;district_lambda&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;dbn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">dbn</span><span class="p">:</span> <span class="n">dbn</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;district_lambda&quot;</span><span class="p">,</span> <span class="s2">&quot;school_name&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dbn</th>
      <th>district_lambda</th>
      <th>school_name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4</th>
      <td>01M015</td>
      <td>01</td>
      <td>P.S. 015 Roberto Clemente</td>
    </tr>
    <tr>
      <th>9</th>
      <td>01M019</td>
      <td>01</td>
      <td>P.S. 019 Asher Levy</td>
    </tr>
    <tr>
      <th>14</th>
      <td>01M020</td>
      <td>01</td>
      <td>P.S. 020 Anna Silver</td>
    </tr>
    <tr>
      <th>19</th>
      <td>01M034</td>
      <td>01</td>
      <td>P.S. 034 Franklin D. Roosevelt</td>
    </tr>
    <tr>
      <th>24</th>
      <td>01M063</td>
      <td>01</td>
      <td>The STAR Academy - P.S.63</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>9148</th>
      <td>84X705</td>
      <td>84</td>
      <td>Family Life Academy Charter School</td>
    </tr>
    <tr>
      <th>9153</th>
      <td>84X706</td>
      <td>84</td>
      <td>Harriet Tubman Charter School</td>
    </tr>
    <tr>
      <th>9158</th>
      <td>84X717</td>
      <td>84</td>
      <td>Icahn Charter School</td>
    </tr>
    <tr>
      <th>9163</th>
      <td>84X718</td>
      <td>84</td>
      <td>Bronx Charter School for Better Learning</td>
    </tr>
    <tr>
      <th>9168</th>
      <td>84X730</td>
      <td>84</td>
      <td>Bronx Charter School for the Arts</td>
    </tr>
  </tbody>
</table>
<p>1878 rows × 3 columns</p>
</div></div>
</div>
</section>
</section>
<section id="Sorting-dataframes">
<h1><span class="section-number">7. </span>Sorting dataframes<a class="headerlink" href="#Sorting-dataframes" title="Permalink to this heading"></a></h1>
<p>Sorting data can make it easier to understand our data set (and also let us get a subset of data, like the 50 wealthiest schools based on <code class="docutils literal notranslate"><span class="pre">total_enrollment</span></code>). We’ve seen how to sort a series. It’s not much more complicated to sort a dataframe. In this example, we sort on total_enrollment, in descending order, then use Python slice notation to get the first 25 schools in the list</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">large_schools</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;total_enrollment&quot;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">large_schools</span><span class="p">[[</span><span class="s2">&quot;dbn&quot;</span><span class="p">,</span> <span class="s2">&quot;district&quot;</span><span class="p">,</span> <span class="s2">&quot;school_name&quot;</span><span class="p">,</span> <span class="s2">&quot;total_enrollment&quot;</span><span class="p">]][:</span><span class="mi">25</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dbn</th>
      <th>district</th>
      <th>school_name</th>
      <th>total_enrollment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3371</th>
      <td>13K430</td>
      <td>13</td>
      <td>Brooklyn Technical High School</td>
      <td>5921</td>
    </tr>
    <tr>
      <th>4815</th>
      <td>20K490</td>
      <td>20</td>
      <td>Fort Hamilton High School</td>
      <td>4678</td>
    </tr>
    <tr>
      <th>6073</th>
      <td>26Q430</td>
      <td>26</td>
      <td>Francis Lewis High School</td>
      <td>4424</td>
    </tr>
    <tr>
      <th>5232</th>
      <td>22K405</td>
      <td>22</td>
      <td>Midwood High School</td>
      <td>4109</td>
    </tr>
    <tr>
      <th>5237</th>
      <td>22K425</td>
      <td>22</td>
      <td>James Madison High School</td>
      <td>3851</td>
    </tr>
    <tr>
      <th>6626</th>
      <td>28Q440</td>
      <td>28</td>
      <td>Forest Hills High School</td>
      <td>3775</td>
    </tr>
    <tr>
      <th>7486</th>
      <td>31R455</td>
      <td>31</td>
      <td>Tottenville High School</td>
      <td>3726</td>
    </tr>
    <tr>
      <th>5032</th>
      <td>21K525</td>
      <td>21</td>
      <td>Edward R. Murrow High School</td>
      <td>3691</td>
    </tr>
    <tr>
      <th>4805</th>
      <td>20K445</td>
      <td>20</td>
      <td>New Utrecht High School</td>
      <td>3572</td>
    </tr>
    <tr>
      <th>6068</th>
      <td>26Q415</td>
      <td>26</td>
      <td>Benjamin N. Cardozo High School</td>
      <td>3405</td>
    </tr>
    <tr>
      <th>7976</th>
      <td>79Q950</td>
      <td>79</td>
      <td>Pathways to Graduation</td>
      <td>3351</td>
    </tr>
    <tr>
      <th>578</th>
      <td>02M475</td>
      <td>2</td>
      <td>Stuyvesant High School</td>
      <td>3342</td>
    </tr>
    <tr>
      <th>7491</th>
      <td>31R460</td>
      <td>31</td>
      <td>Susan E. Wagner High School</td>
      <td>3332</td>
    </tr>
    <tr>
      <th>4825</th>
      <td>20K505</td>
      <td>20</td>
      <td>Franklin Delano Roosevelt High School</td>
      <td>3304</td>
    </tr>
    <tr>
      <th>5893</th>
      <td>25Q425</td>
      <td>25</td>
      <td>John Bowne High School</td>
      <td>3294</td>
    </tr>
    <tr>
      <th>7471</th>
      <td>31R440</td>
      <td>31</td>
      <td>New Dorp High School</td>
      <td>3128</td>
    </tr>
    <tr>
      <th>6083</th>
      <td>26Q495</td>
      <td>26</td>
      <td>Bayside High School</td>
      <td>2949</td>
    </tr>
    <tr>
      <th>2653</th>
      <td>10X445</td>
      <td>10</td>
      <td>The Bronx High School of Science</td>
      <td>2936</td>
    </tr>
    <tr>
      <th>6631</th>
      <td>28Q505</td>
      <td>28</td>
      <td>Hillcrest High School</td>
      <td>2881</td>
    </tr>
    <tr>
      <th>913</th>
      <td>03M485</td>
      <td>3</td>
      <td>Fiorello H. LaGuardia High School of Music &amp; A...</td>
      <td>2717</td>
    </tr>
    <tr>
      <th>7481</th>
      <td>31R450</td>
      <td>31</td>
      <td>Curtis High School</td>
      <td>2455</td>
    </tr>
    <tr>
      <th>6401</th>
      <td>27Q480</td>
      <td>27</td>
      <td>John Adams High School</td>
      <td>2450</td>
    </tr>
    <tr>
      <th>6636</th>
      <td>28Q620</td>
      <td>28</td>
      <td>Thomas A. Edison Career and Technical Educatio...</td>
      <td>2335</td>
    </tr>
    <tr>
      <th>5037</th>
      <td>21K540</td>
      <td>21</td>
      <td>John Dewey High School</td>
      <td>2276</td>
    </tr>
    <tr>
      <th>2918</th>
      <td>11X455</td>
      <td>11</td>
      <td>Harry S Truman High School</td>
      <td>2229</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Saving-data">
<h1><span class="section-number">8. </span>Saving data<a class="headerlink" href="#Saving-data" title="Permalink to this heading"></a></h1>
<p>Now that we’ve made these changes to our core data, we can export it so that we can either load it into a different notebook file, or another program (maybe for visualization, or a web server). Pandas makes this <em>very</em> easy. Here we save <code class="docutils literal notranslate"><span class="pre">df</span></code> as a .csv file (you can open it in Excel). It will save it into the same folder as our notebook file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;school-demographics-ay2020.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Matthew X. Curinga.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>